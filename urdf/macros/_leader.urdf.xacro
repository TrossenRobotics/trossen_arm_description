<?xml version="1.0" encoding="utf-8"?>
<robot name="leader" xmlns:xacro="http://ros.org/wiki/xacro">

  <xacro:property name="robot_model"
    value="leader"
    scope="local"/>
  <xacro:property name="dof"
    value="7"
    scope="local"/>

  <xacro:macro name="leader" params="variant arm_side:='' prefix:=''">

    <xacro:property name="mesh_directory" value="package://trossen_arm_description/meshes/${robot_model}"/>

    <link name="${prefix}base_link">
      <xacro:if value="${arm_side == 'right'}">
        <inertial>
          <origin
            xyz="0.00005199 -0.03429087 0.00005295"
            rpy="0 0 0" />
          <mass
            value="0.37290125" />
          <inertia
            ixx="0.00034804"
            ixy="-0.00000039"
            ixz="-0.00000003"
            iyy="0.00014057"
            iyz="-0.00000080"
            izz="0.00034074" />
        </inertial>
        <visual>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/base_link_right.stl" />
          </geometry>
          <material name="trossen_black"/>
        </visual>
        <collision>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/base_link_right.stl" />
          </geometry>
        </collision>
      </xacro:if>  <!-- arm_side == right -->
      <xacro:if value="${arm_side == 'left'}">
        <inertial>
          <origin
            xyz="0.00005199 0.03429087 0.00005295"
            rpy="0 0 0" />
          <mass
            value="0.37290125" />
          <inertia
            ixx="0.00034804"
            ixy="0.00000039"
            ixz="-0.00000003"
            iyy="0.00014057"
            iyz="0.00000080"
            izz="0.00034074" />
        </inertial>
        <visual>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/base_link_left.stl" />
          </geometry>
          <material name="trossen_black"/>
        </visual>
        <collision>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/base_link_left.stl" />
          </geometry>
        </collision>
      </xacro:if>  <!-- arm_side == left -->
    </link>

    <link name="${prefix}link_1">
      <xacro:if value="${arm_side == 'right'}">
        <inertial>
          <origin
            xyz="0.00331378 -0.03460068 -0.00004285"
            rpy="0 0 0" />
          <mass
            value="0.45236030" />
          <inertia
            ixx="0.00018930"
            ixy="0.00000360"
            ixz="-0.00000033"
            iyy="0.00043171"
            iyz="0.00000000"
            izz="0.00045089" />
        </inertial>
        <visual>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/link_1_right.stl" />
          </geometry>
          <material name="trossen_black"/>
        </visual>
        <collision>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/link_1_right.stl" />
          </geometry>
        </collision>
      </xacro:if>  <!-- arm_side == right -->
      <xacro:if value="${arm_side == 'left'}">
        <inertial>
          <origin
            xyz="0.00331378 0.03460068 -0.00004285"
            rpy="0 0 0" />
          <mass
            value="0.45236030" />
          <inertia
            ixx="0.00018930"
            ixy="-0.00000360"
            ixz="-0.00000033"
            iyy="0.00043171"
            iyz="-0.00000000"
            izz="0.00045089" />
        </inertial>
        <visual>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/link_1_left.stl" />
          </geometry>
          <material name="trossen_black"/>
        </visual>
        <collision>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/link_1_left.stl" />
          </geometry>
        </collision>
      </xacro:if>  <!-- arm_side == left -->
    </link>

    <joint name="${prefix}joint_0" type="revolute">
      <parent link="${prefix}base_link" />
      <child link="${prefix}link_1" />
      <xacro:if value="${arm_side == 'right'}">
        <origin
          xyz="0 -0.05825 0"
          rpy="0 0 0" />
        <axis xyz="0 -1 0" />
        <limit
          effort="0"
          lower="${-pi / 2}"
          upper="${pi}"
          velocity="${2 * pi}" />
      </xacro:if>  <!-- arm_side == right -->
      <xacro:if value="${arm_side == 'left'}">
        <origin
          xyz="0 0.05825 0"
          rpy="0 0 0" />
        <axis xyz="0 1 0" />
        <limit
          effort="0"
          lower="${-pi}"
          upper="${pi / 2}"
          velocity="${2 * pi}" />
      </xacro:if>  <!-- arm_side == left -->
    </joint>

    <!-- link 2 universal -->
    <link name="${prefix}link_2">
      <inertial>
        <origin
          xyz="-0.00000527 0.00001239 -0.08091014"
          rpy="0 0 0" />
        <mass value="0.33783172" />
        <inertia
          ixx="0.00031788"
          ixy="0.00000004"
          ixz="-0.00000049"
          iyy="0.00034942"
          iyz="-0.00000045"
          izz="0.00016037" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_2.stl" />
        </geometry>
        <material name="trossen_black"/>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_2.stl" />
        </geometry>
      </collision>
    </link>

    <joint name="${prefix}joint_1" type="revolute">
      <parent link="${prefix}link_1" />
      <child link="${prefix}link_2" />
      <axis xyz="1 0 0" />
      <xacro:if value="${arm_side == 'right'}">
        <origin
          xyz="0 -0.0365 0"
          rpy="0 0 0" />
        <limit
          effort="0"
          lower="${-pi}"
          upper="0"
          velocity="${2 * pi}" />
      </xacro:if>  <!-- arm_side == right -->
      <xacro:if value="${arm_side == 'left'}">
        <origin
          xyz="0 0.0365 0"
          rpy="0 0 0" />
        <limit
          effort="0"
          lower="0"
          upper="${pi}"
          velocity="${2 * pi}" />
      </xacro:if>  <!-- arm_side == left -->
    </joint>

    <!-- link 3 right -->
    <link name="${prefix}link_3">
      <xacro:if value="${arm_side == 'right'}">
        <inertial>
          <origin
            xyz="0.01706827 0.00212153 -0.16679020"
            rpy="0 0 0" />
          <mass
            value="0.46940642" />
          <inertia
            ixx="0.00182642"
            ixy="-0.00000341"
            ixz="0.00015666"
            iyy="0.00165644"
            iyz="0.00002673"
            izz="0.00039819" />
        </inertial>
        <visual>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/link_3_right.stl" />
          </geometry>
          <material name="trossen_black"/>
        </visual>
        <collision>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/link_3_right.stl" />
          </geometry>
        </collision>
      </xacro:if>  <!-- arm_side == left -->
      <xacro:if value="${arm_side == 'left'}">
        <inertial>
          <origin
            xyz="0.01706827 -0.00212153 -0.16679020"
            rpy="0 0 0" />
          <mass
            value="0.46940642" />
          <inertia
            ixx="0.00182642"
            ixy="0.00000341"
            ixz="0.00015666"
            iyy="0.00165644"
            iyz="-0.00002673"
            izz="0.00039819" />
        </inertial>
        <visual>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/link_3_left.stl" />
          </geometry>
          <material name="trossen_black"/>
        </visual>
        <collision>
          <origin
            xyz="0 0 0"
            rpy="0 0 0" />
          <geometry>
            <mesh
              filename="${mesh_directory}/link_3_left.stl" />
          </geometry>
        </collision>
      </xacro:if>  <!-- arm_side == left -->
    </link>

    <joint name="${prefix}joint_2" type="revolute">
      <origin
        xyz="0 0 -0.106"
        rpy="0 0 0" />
      <parent link="${prefix}link_2" />
      <child link="${prefix}link_3" />
      <axis xyz="0 0 -1" />
      <limit
        effort="0"
        lower="${-pi / 2}"
        upper="${pi / 2}"
        velocity="${2 * pi}" />
    </joint>

    <link name="${prefix}link_4">
      <inertial>
        <origin
          xyz="-0.01912502 0.00002771 -0.08994190"
          rpy="0 0 0" />
        <mass value="0.19153172" />
        <inertia
          ixx="0.00019027"
          ixy="-0.00000010"
          ixz="-0.00001489"
          iyy="0.00015938"
          iyz="-0.00000047"
          izz="0.00008565" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_4.stl" />
        </geometry>
        <material name="trossen_black"/>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_4.stl" />
        </geometry>
      </collision>
    </link>

    <joint name="${prefix}joint_3" type="revolute">
      <origin
        xyz="0.02 0 -0.1938"
        rpy="0 0 0" />
      <parent link="${prefix}link_3" />
      <child link="${prefix}link_4" />
      <xacro:if value="${arm_side == 'right'}">
        <axis xyz="0 -1 0" />
        <limit
          effort="0"
          lower="0"
          upper="${3 * pi / 4}"
          velocity="${2 * pi}" />
      </xacro:if>  <!-- arm_side == right -->
      <xacro:if value="${arm_side == 'left'}">
        <axis xyz="0 1 0" />
        <limit
          effort="0"
          lower="${-3 * pi / 4}"
          upper="0"
          velocity="${2 * pi}" />
      </xacro:if>  <!-- arm_side == left -->
    </joint>

    <link name="${prefix}link_5">
      <inertial>
        <origin
          xyz="-0.00025767 0.00302328 -0.03375968"
          rpy="0 0 0" />
        <mass value="0.24163171" />
        <inertia
          ixx="0.00022638"
          ixy="0.00000100"
          ixz="-0.00000442"
          iyy="0.00016124"
          iyz="0.00000725"
          izz="0.00013726" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_5.stl" />
        </geometry>
        <material name="trossen_black"/>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_5.stl" />
        </geometry>
      </collision>
    </link>

    <joint name="${prefix}joint_4" type="revolute">
      <origin
        xyz="-0.02 0 -0.1185"
        rpy="0 0 0" />
      <parent link="${prefix}link_4" />
      <child link="${prefix}link_5" />
      <axis xyz="0 0 -1" />
      <limit
        effort="0"
        lower="${-pi / 2}"
        upper="${pi / 2}"
        velocity="${2 * pi}" />
    </joint>

    <link name="${prefix}link_6">
      <inertial>
        <origin
          xyz="-0.01044529 0.00000910 0.00011242"
          rpy="0 0 0" />
        <mass value="0.18731697" />
        <inertia
          ixx="0.00006195"
          ixy="-0.00000001"
          ixz="-0.00000032"
          iyy="0.00005051"
          iyz="0.00000000"
          izz="0.00006440" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_6.stl" />
        </geometry>
        <material name="trossen_black"/>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_6.stl" />
        </geometry>
      </collision>
    </link>

    <joint name="${prefix}joint_5" type="revolute">
      <origin
        xyz="0 0 -0.101"
        rpy="0 0 0" />
      <parent link="${prefix}link_5" />
      <child link="${prefix}link_6" />
      <axis xyz="0 1 0" />
      <limit
        effort="0"
        lower="${-pi / 4}"
        upper="${pi / 4}"
        velocity="${2 * pi}" />
    </joint>

    <link name="${prefix}link_7">
      <inertial>
        <origin
          xyz="-0.04169427 0.00058029 -0.06323582"
          rpy="0 0 0" />
        <mass value="0.23686287" />
        <inertia
          ixx="0.00019957"
          ixy="-0.00000203"
          ixz="0.00016948"
          iyy="0.00053905"
          iyz="0.00000192"
          izz="0.00038760" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_7.stl" />
        </geometry>
        <material name="trossen_black"/>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_7.stl" />
        </geometry>
      </collision>
    </link>

    <joint name="${prefix}joint_6" type="revolute">
      <origin
        xyz="-0.034 0 0"
        rpy="0 0 0" />
      <parent link="${prefix}link_6" />
      <child link="${prefix}link_7" />
      <axis xyz="1 0 0" />
      <limit
        effort="0"
        lower="${-pi / 2}"
        upper="${pi / 2}"
        velocity="${2 * pi}" />
    </joint>

    <link name="link_8">
      <inertial>
        <origin
          xyz="-0.01502064 0.00191435 0.00656522"
          rpy="0 0 0" />
        <mass value="0.00915397" />
        <inertia
          ixx="0.00000120"
          ixy="-0.00000021"
          ixz="0.00000102"
          iyy="0.00000385"
          iyz="0.00000011"
          izz="0.00000284" />
      </inertial>
      <visual>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_8.stl" />
        </geometry>
        <material name="trossen_black"/>
      </visual>
      <collision>
        <origin
          xyz="0 0 0"
          rpy="0 0 0" />
        <geometry>
          <mesh filename="${mesh_directory}/link_8.stl" />
        </geometry>
      </collision>
    </link>

    <joint name="joint_7" type="revolute">
      <parent link="link_7" />
      <child link="link_8" />
      <xacro:if value="${arm_side == 'right'}">
        <origin
          xyz="-0.02847106 0.01930000 -0.07900135"
          rpy="0 0 0" />
        <axis xyz="0 1 0" />
        <limit
          lower="${-pi / 6}"
          upper="0"
          effort="0"
          velocity="0" />
      </xacro:if>  <!-- arm_side == right -->
      <xacro:if value="${arm_side == 'left'}">
        <origin
          xyz="-0.02847106 -0.01930000 -0.07900135"
          rpy="0 0 0" />
        <axis xyz="0 -1 0" />
        <limit
          lower="0"
          upper="${pi / 6}"
          effort="0"
          velocity="0" />
      </xacro:if>  <!-- arm_side == left -->
    </joint>

    <joint name="${prefix}ee_gripper" type="fixed">
      <origin
        xyz="-0.021 0 -0.200062"
        rpy="0 0 0" />
      <parent link="${prefix}link_8" />
      <child link="${prefix}ee_gripper_link" />
    </joint>

    <link name="${prefix}ee_gripper_link" />

  </xacro:macro>  <!-- leader -->

</robot>
